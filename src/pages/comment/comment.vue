<template>
  <div class="comment_inner_area">
    <h2 class="top_title"><span>100</span>条评论</h2>
    <div class="comment_item">
      <div class="tz_one"><img @tap="toRecord" src="http://qiniuyun.donghao.club/6.jpg">
        <div class="tz_content">
          <div class="tz_tag">
            <van-icon name="like" color="#505052" size="40rpx"/>
            <span class="base_word">12</span>
          </div>
          <div><span class="text_title" @tap="showCommentItem">怎么把div定位到页面窗口的右上角，急急急</span></div>
          <pre class="main_content" @tap="showCommentItem">
		百度前端技术学院是由百度多模交互搜索部EFE团队、百度校园品牌部、百度校园招聘团队创建的面向大学生的前端技术学习平台。
              </pre>
          <div class="comment_other">
            <span class="comment_date">2019-12-12 02:22:22</span>
          </div>
          <van-divider dashed contentPosition="left">
            <span class="show_more">
              <span>展开5条回复</span>
              <van-icon name="down"></van-icon>
            </span>
          </van-divider>
          <div class="comment_item">
            <div class="tz_one small_comment"><img @tap="toRecord" src="http://qiniuyun.donghao.club/6.jpg">
              <div class="tz_content">
                <div class="tz_tag">
                  <van-icon name="like" size="40rpx" color="#FE2C54"/>
                  <span class="base_word">12</span>
                </div>
                <div><span class="text_title" @tap="showCommentItem">怎么把div定位到页面窗口的右上角，急急急</span></div>
                <pre class="main_content" @tap="showCommentItem">
		百度前端技术学院是由百度多模交互搜索部EFE团队、百度校园品牌部、百度校园招聘团队创建的面向大学生的前端技术学习平台。
              </pre>
                <div class="comment_other">
                  <span class="comment_date">2019-12-12 02:22:22</span>
                </div>
              </div>
            </div>

          </div>
          <div class="comment_item">
            <div class="tz_one small_comment"><img @tap="toRecord" src="http://qiniuyun.donghao.club/6.jpg">
              <div class="tz_content">
                <div class="tz_tag">
                  <van-icon name="like" size="40rpx" color="#FE2C54"/>
                  <span class="base_word">12</span>
                </div>
                <div><span class="text_title" @tap="showCommentItem">怎么把div定位到页面窗口的右上角，急急急</span></div>
                <pre class="main_content" @tap="showCommentItem">
		百度前端技术学院是由百度多模交互搜索部EFE团队、百度校园品牌部、百度校园招聘团队创建的面向大学生的前端技术学习平台。
              </pre>
                <div class="comment_other">
                  <span class="comment_date">2019-12-12 02:22:22</span>
                </div>
              </div>
            </div>

          </div>

        </div>
      </div>

    </div>
    <div class="comment_item">
      <div class="tz_one"><img @tap="toRecord" src="http://qiniuyun.donghao.club/6.jpg">
        <div class="tz_content">
          <div class="tz_tag">
            <van-icon name="like" size="40rpx" color="#FE2C54"/>
            <span class="base_word">12</span>
          </div>
          <div><span class="text_title" @tap="showCommentItem">怎么把div定位到页面窗口的右上角，急急急</span></div>
          <pre class="main_content" @tap="showCommentItem">
		百度前端技术学院是由百度多模交互搜索部EFE团队、百度校园品牌部、百度校园招聘团队创建的面向大学生的前端技术学习平台。
              </pre>
          <div class="comment_other">
            <span class="comment_date">2019-12-12 02:22:22</span>
          </div>
          <div class="comment_item">
            <div class="tz_one small_comment"><img @tap="toRecord" src="http://qiniuyun.donghao.club/6.jpg">
              <div class="tz_content">
                <div class="tz_tag">
                  <van-icon name="like" size="40rpx" color="#FE2C54"/>
                  <span class="base_word">12</span>
                </div>
                <div><span class="text_title" @tap="showCommentItem">怎么把div定位到页面窗口的右上角，急急急</span></div>
                <pre class="main_content" @tap="showCommentItem">
		百度前端技术学院是由百度多模交互搜索部EFE团队、百度校园品牌部、百度校园招聘团队创建的面向大学生的前端技术学习平台。
              </pre>
                <div class="comment_other">
                  <span class="comment_date">2019-12-12 02:22:22</span>
                </div>
              </div>
            </div>

          </div>
          <div class="comment_item">
            <div class="tz_one small_comment"><img @tap="toRecord" src="http://qiniuyun.donghao.club/6.jpg">
              <div class="tz_content">
                <div class="tz_tag">
                  <van-icon name="like" size="40rpx" color="#FE2C54"/>
                  <span class="base_word">12</span>
                </div>
                <div><span class="text_title" @tap="showCommentItem">怎么把div定位到页面窗口的右上角，急急急</span></div>
                <pre class="main_content" @tap="showCommentItem">
		百度前端技术学院是由百度多模交互搜索部EFE团队、百度校园品牌部、百度校园招聘团队创建的面向大学生的前端技术学习平台。
              </pre>
                <div class="comment_other">
                  <span class="comment_date">2019-12-12 02:22:22</span>
                </div>
              </div>
            </div>

          </div>

        </div>
      </div>

    </div>

    <div class="comment_item">
      <div class="tz_one"><img @tap="toRecord" src="http://qiniuyun.donghao.club/6.jpg">
        <div class="tz_content">
          <div class="tz_tag">
            <van-icon name="like" color="#505052" size="40rpx"/>
            <span class="base_word">12</span>
          </div>
          <div><span class="text_title" @tap="showCommentItem">怎么把div定位到页面窗口的右上角，急急急</span></div>
          <pre class="main_content" @tap="showCommentItem">
		百度前端技术学院是由百度多模交互搜索部EFE团队、百度校园品牌部、百度校园招聘团队创建的面向大学生的前端技术学习平台。
              </pre>
          <div class="comment_other">
            <span class="comment_date">2019-12-12 02:22:22</span>
          </div>
          <div class="comment_item">
            <div class="tz_one small_comment"><img @tap="toRecord" src="http://qiniuyun.donghao.club/6.jpg">
              <div class="tz_content">
                <div class="tz_tag">
                  <van-icon name="like" size="40rpx" color="#FE2C54"/>
                  <span class="base_word">12</span>
                </div>
                <div><span class="text_title" @tap="showCommentItem">怎么把div定位到页面窗口的右上角，急急急</span></div>
                <pre class="main_content" @tap="showCommentItem">
		百度前端技术学院是由百度多模交互搜索部EFE团队、百度校园品牌部、百度校园招聘团队创建的面向大学生的前端技术学习平台。
              </pre>
                <div class="comment_other">
                  <span class="comment_date">2019-12-12 02:22:22</span>
                </div>
              </div>
            </div>

          </div>
          <div class="comment_item">
            <div class="tz_one small_comment"><img @tap="toRecord" src="http://qiniuyun.donghao.club/6.jpg">
              <div class="tz_content">
                <div class="tz_tag">
                  <van-icon name="like" size="40rpx" color="#FE2C54"/>
                  <span class="base_word">12</span>
                </div>
                <div><span class="text_title" @tap="showCommentItem">怎么把div定位到页面窗口的右上角，急急急</span></div>
                <pre class="main_content" @tap="showCommentItem">
		百度前端技术学院是由百度多模交互搜索部EFE团队、百度校园品牌部、百度校园招聘团队创建的面向大学生的前端技术学习平台。
              </pre>
                <div class="comment_other">
                  <span class="comment_date">2019-12-12 02:22:22</span>
                </div>
              </div>
            </div>

          </div>

        </div>
      </div>

    </div>

    <van-divider contentPosition="center" customStyle="color: #37d6b1;border-color: #37d6b1;font-size: 24rpx;">
      没有更多评论la
    </van-divider>
    <van-popup
      :show="isShowItem"
      position="bottom"
      custom-style="height: 10%"
      @close="closeCommentItem">
      <van-cell-group>
        <van-field
          confirm-hold
          :focus="inputFocus"
          center
          :value="comment_content"
          cursor-spacing="20"
          clearable
          label="回复"
          placeholder="回复:李沫熙"
          border="true"
          use-button-slot>
          <van-button slot="button" @tap="showAT" size="small" type="primary">
            <span style="font-size: 16px;font-weight: bold">@</span>
          </van-button>
          <van-button custom-class="btn-class" slot="button" @tap="finishComment" size="small" type="info">
            <span>评论</span>
          </van-button>
        </van-field>
      </van-cell-group>
    </van-popup>
    <van-popup
      :show="isShowAT"
      position="bottom"
      round
      custom-style="min-height: 10%;max-height: 60%"
      @close="closeAt">
      <div class="at_area">
        <div class="at_user" @tap="chooseAt('李沫熙')">
          <img src="http://qiniuyun.donghao.club/6.jpg">
          <span>李沫熙</span>
        </div>
        <div class="at_user" @tap="chooseAt('王我')">
          <img src="http://qiniuyun.donghao.club/1.jpg">
          <span>王我</span>
        </div>
        <div class="at_user" @tap="chooseAt('里斯')">
          <img src="http://qiniuyun.donghao.club/2.jpg">
          <span>里斯</span>
        </div>
        <div class="at_user" @tap="chooseAt('张三')">
          <img src="http://qiniuyun.donghao.club/3.jpg">
          <span>张三</span>
        </div>
      </div>
    </van-popup>
    <van-toast id="van-toast"/>
  </div>
</template>

<script>
  import Toast from "../../../static/vant/toast/toast";

  export default {
    name: "Comment",
    data() {
      return {
        isShowItem: false,
        inputFocus: false,
        isShowAT: false,
        comment_content: "",
        atArr: []
      }
    },
    methods: {
      closeCommentItem() {
        this.isShowItem = !this.isShowItem
        this.inputFocus = !this.inputFocus
      },
      showCommentItem() {
        this.isShowItem = !this.isShowItem
        this.inputFocus = !this.inputFocus
      },
      showAT() {
        this.isShowAT = !this.isShowAT
      },
      closeAt() {
        this.isShowAT = !this.isShowAT
      },
      chooseAt(itemName) {
        if (this.atArr.indexOf(itemName) > -1) {
          Toast.fail("已经@TA啦");
          return;
        }
        this.comment_content = this.comment_content + "@" + itemName
        this.atArr.push(itemName)
        this.isShowAT = !this.isShowAT
      },
      finishComment(){
        this.closeCommentItem()
        Toast.success("评论成功")
      },
      toRecord(){
        wx.navigateTo({
          url: '/pages/record/main?'
        })
      }
    }
  }
</script>

<style>
  .top_title {
    margin: 20rpx auto;
    text-align: center;
  }

  .tz_one {
    display: flex;
  }

  .tz_one img {
    width: 90rpx;
    height: 90rpx;
    border-radius: 50%;
    margin-right: 32rpx;
    flex-shrink: 0;
  }

  .tz_one .tz_content {
    margin: 0;
    padding: 0;
  }

  .tz_one .tz_content h3 {
    margin: 0;
    font-size: 30rpx;
    line-height: 40rpx;
  }

  .tz_one .tz_content p {
    margin: 10rpx 0 0;
    font-size: 24rpx;
    line-height: 40rpx;
  }

  .small_comment {
    margin-top: 20rpx;
  }

  .comment_date {
    font-size: 28rpx;
    margin-top: 8rpx;
    color: #AF0C0C;
  }

  .comment_other {
    display: flex;
    flex-direction: row;
    align-items: center;
  }

  .comment_inner_area {
    padding: 20rpx;
  }

  .at_user {
    display: flex;
    align-items: center;
    margin-bottom: 60rpx;
  }

  .at_user img {
    width: 64rpx;
    height: 64rpx;
    flex-shrink: 0;
    border-radius: 50%;
    margin-right: 40rpx;
  }

  .at_user span {
    font-weight: bold;
    color: #37d6b1;
  }

  .at_area {
    padding: 20rpx 40rpx;
  }

  .comment_item {
    margin-top: 10rpx;
  }

  .text_title {
    font-size: 28rpx;
    line-height: 50rpx;
    font-weight: bolder;
    color: transparent;
     background-color: black;
    text-shadow: rgba(255, 255, 255, 0.5) 0 12rpx 12rpx, rgba(255, 255, 255, 0.2) 2rpx 6rpx 6rpx;
     -webkit-background-clip: text;
  }

  .main_content {
    margin-top: 10rpx;
    color: #2B2B2B;
  }

  .tz_tag {
    float: right;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .tz_tag span{
    color: #FE2C54;
    font-weight: bold;
    font-size: 10px;

  }

  .tz_item {
    margin-bottom: 40rpx;
  }

  .btn-class{
    margin-left: 10rpx;
  }

  .show_more{
    color: #505052;
    font-size: 24rpx;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
  }
</style>
